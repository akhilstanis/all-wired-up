# require 'spec_helper'
# require 'all_wired_up'
# require 'pp'

# describe AllWiredUp do

#   before :each do
#     @o = AllWiredUp.new
#   end

#   circuitfile = File.open(File.expand_path(File.dirname(__FILE__)) + '/fixtures/simple_circuits.txt').readlines
#   complex_circuit = File.open(File.expand_path(File.dirname(__FILE__)) + '/fixtures/complex_circuits.txt').readlines


#   # it "should get rid of complex wires" do

#   #   expected0 = [
#   #     "0\n",
#   #     "O------------|\n",
#   #     "1            |\n",
#   #     "             X--------------------|\n",
#   #     "1            |                    |\n",
#   #     "A------------|                    |\n",
#   #     "1                                 O--------------------|\n",
#   #     "                                  |                    |\n",
#   #     "0                                 |                    |\n",
#   #     "N---------------------------------|                    |\n",
#   #     "                                                       |\n",
#   #     "0                                                      |\n",
#   #     "O------------|                                         A------------@\n",
#   #     "1            |                                         |\n",
#   #     "             X--------------------|                    |\n",
#   #     "1            |                    |                    |\n",
#   #     "A------------|                    |                    |\n",
#   #     "1                                 O--------------------|\n",
#   #     "                                  |\n",
#   #     "0                                 |\n",
#   #     "N---------------------------------|\n"
#   #   ]

#   #   circuit1 = [
#   #     "1------------|\n",
#   #     "             |\n",
#   #     "             X--------------------|\n",
#   #     "             |                    |\n",
#   #     "1------------|                    |\n",
#   #     "                                  O--------------------|\n",
#   #     "                                  |                    |\n",
#   #     "                                  |                    |\n",
#   #     "1---------------------------------|                    |\n",
#   #     "                                                       |\n",
#   #     "                                                       |\n",
#   #     "1------------|                                         A------------@\n",
#   #     "             |                                         |\n",
#   #     "             X--------------------|                    |\n",
#   #     "             |                    |                    |\n",
#   #     "1------------|                    |                    |\n",
#   #     "                                  O--------------------|\n",
#   #     "                                  |\n",
#   #     "                                  |\n",
#   #     "1---------------------------------|\n"
#   #   ]

#   #   expected1 = [
#   #     "1\n",
#   #     "|\n",
#   #     "X--------------------|\n",
#   #     "|                    |\n",
#   #     "1                    |\n",
#   #     "                     O--------------------|\n",
#   #     "                     |                    |\n",
#   #     "                     |                    |\n",
#   #     "1--------------------|                    |\n",
#   #     "                                          |\n",
#   #     "                                          |\n",
#   #     "1                                         A------------@\n",
#   #     "|                                         |\n",
#   #     "X--------------------|                    |\n",
#   #     "|                    |                    |\n",
#   #     "1                    |                    |\n",
#   #     "                     O--------------------|\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "1--------------------|\n"
#   #   ]

#   #   circuit2 = [
#   #     "0--------------------|\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     O--------------------|\n",
#   #     "                     |                    |\n",
#   #     "                     |                    |\n",
#   #     "1--------------------|                    |\n",
#   #     "                                          |\n",
#   #     "                                          |\n",
#   #     "                                          A------------@\n",
#   #     "                                          |\n",
#   #     "0--------------------|                    |\n",
#   #     "                     |                    |\n",
#   #     "                     |                    |\n",
#   #     "                     O--------------------|\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "1--------------------|\n"
#   #   ]

#   #   expected2 = [
#   #     "0\n",
#   #     "|\n",
#   #     "|\n",
#   #     "O--------------------|\n",
#   #     "|                    |\n",
#   #     "|                    |\n",
#   #     "1                    |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     A------------@\n",
#   #     "                     |\n",
#   #     "0                    |\n",
#   #     "|                    |\n",
#   #     "|                    |\n",
#   #     "O--------------------|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "1\n"
#   #   ]

#   #   circuit3 = [
#   #     "1--------------------|\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     A------------@\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "                     |\n",
#   #     "1--------------------|\n"
#   #   ]

#   #   expected3 = [
#   #     "1\n",
#   #     "|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "A------------@\n",
#   #     "|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "|\n",
#   #     "1\n"
#   #   ]

#   #   @o.get_rid_of_wires(complex_circuit).should == expected0
#   #   @o.get_rid_of_wires(circuit1).should == expected1
#   #   @o.get_rid_of_wires(circuit2).should == expected2
#   #   @o.get_rid_of_wires(circuit3).should == expected3

#   # end

#   it "should replace level zero gates of a complex circuit" do

#     circuit0 = [
#       "0\n",
#       "O------------|\n",
#       "1            |\n",
#       "             X--------------------|\n",
#       "1            |                    |\n",
#       "A------------|                    |\n",
#       "1                                 O--------------------|\n",
#       "                                  |                    |\n",
#       "0                                 |                    |\n",
#       "N---------------------------------|                    |\n",
#       "                                                       |\n",
#       "0                                                      |\n",
#       "O------------|                                         A------------@\n",
#       "1            |                                         |\n",
#       "             X--------------------|                    |\n",
#       "1            |                    |                    |\n",
#       "A------------|                    |                    |\n",
#       "1                                 O--------------------|\n",
#       "                                  |\n",
#       "0                                 |\n",
#       "N---------------------------------|\n"
#     ]

#     expected0 = [
#       " \n",
#       "1------------|\n",
#       "             |\n",
#       "             X--------------------|\n",
#       "             |                    |\n",
#       "1------------|                    |\n",
#       "                                  O--------------------|\n",
#       "                                  |                    |\n",
#       "                                  |                    |\n",
#       "1---------------------------------|                    |\n",
#       "                                                       |\n",
#       "                                                       |\n",
#       "1------------|                                         A------------@\n",
#       "             |                                         |\n",
#       "             X--------------------|                    |\n",
#       "             |                    |                    |\n",
#       "1------------|                    |                    |\n",
#       "                                  O--------------------|\n",
#       "                                  |\n",
#       "                                  |\n",
#       "1---------------------------------|\n"
#     ]

#     circuit1 = [
#       "1\n",
#       "|\n",
#       "X--------------------|\n",
#       "|                    |\n",
#       "1                    |\n",
#       "                     O--------------------|\n",
#       "                     |                    |\n",
#       "                     |                    |\n",
#       "1--------------------|                    |\n",
#       "                                          |\n",
#       "                                          |\n",
#       "1                                         A------------@\n",
#       "|                                         |\n",
#       "X--------------------|                    |\n",
#       "|                    |                    |\n",
#       "1                    |                    |\n",
#       "                     O--------------------|\n",
#       "                     |\n",
#       "                     |\n",
#       "1--------------------|\n"
#     ]

#     expected1 = [
#       " \n",
#       " \n",
#       "0--------------------|\n",
#       "                     |\n",
#       "                     |\n",
#       "                     O--------------------|\n",
#       "                     |                    |\n",
#       "                     |                    |\n",
#       "1--------------------|                    |\n",
#       "                                          |\n",
#       "                                          |\n",
#       "                                          A------------@\n",
#       "                                          |\n",
#       "0--------------------|                    |\n",
#       "                     |                    |\n",
#       "                     |                    |\n",
#       "                     O--------------------|\n",
#       "                     |\n",
#       "                     |\n",
#       "1--------------------|\n"
#     ]

#     @o.replace_level_zero_gate(circuit0).should == expected0
#     @o.replace_level_zero_gate(circuit1).should == expected1

#   end

#   it "should find a reduction hash for a complex circuit" do
#     circuit0 = [
#       "1",
#       "|",
#       "X",
#       "|",
#       "1",
#       " ",
#       " ",
#       " ",
#       "1",
#       " ",
#       " ",
#       "1",
#       "|",
#       "X",
#       "|",
#       "1",
#       " ",
#       " ",
#       " ",
#       "1"
#     ]

#     expected0 = {2=>{:ip=>["1", "|", "X", "|", "1"], :replace=>[0, 1, 3, 4]}, 13=>{:ip=>["1", "|", "X", "|", "1"], :replace=>[11, 12, 14, 15]}}
#     @o.reduction_hash(circuit0).should == expected0
#   end


#   # it "should reduce bulbs at level zero to ON or OFF" do

#   #   circuit = [
#   #     "0------------@\n",
#   #     "\n",
#   #     "1------------@\n"
#   #   ]

#   #   @o.find_and_replace_bulbs_in_level(circuit).should == ["OFF\n","\n","ON\n"]

#   # end

#   # it "should find whether there are any bulbs t o be processed" do

#   #   circuit0 = ["OFF\n","\n","ON\n"]

#   #   circuit1 = [
#   #     "0------------@\n",
#   #     "\n",
#   #     "1------------@\n"
#   #   ]

#   #   circuit2 = [
#   #     " \n",
#   #     " \n",
#   #     "1-----------@\n",
#   #     " \n"
#   #   ]

#   #   @o.any_more_bulbs?(circuit0).should == false
#   #   @o.any_more_bulbs?(circuit1).should == true
#   #   @o.any_more_bulbs?(circuit2).should == true

#   # end

#   it "shoudl reduce circuit level by level" do

#     circuit = [
#       "0-------------|\n",
#       "              A------------|\n",
#       "1-------------|            |\n",
#       "                           X------------@\n",
#       "1-------------|            |\n",
#       "              N------------|\n",
#       "\n",
#       "0-------------|\n",
#       "              O------------|\n",
#       "1-------------|            |\n",
#       "                           X------------@\n",
#       "1-------------|            |\n",
#       "              X------------|\n",
#       "1-------------|"
#     ]

#     # circuit = @o.process circuit

#     # circuit.should == ["OFF\n","\n","ON\n"]

#     # @o.process(circuitfile).should == ["ON\n","\n","OFF\n","\n","ON\n"]

#     @o.process(complex_circuit).should == []
#   end

# end
